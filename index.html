<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>NiBdy Archive</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { 
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #f5f5f5;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }
    .container { max-width: 1400px; margin: 0 auto; padding: 0 20px; width: 100%; }
    
    header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 2rem 0;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    h1 { font-size: 2rem; text-align: center; margin-bottom: 1.5rem; }
    
    nav {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 1rem;
      margin-bottom: 1.5rem;
    }
    nav a {
      background: rgba(255,255,255,0.2);
      padding: 0.6rem 1.2rem;
      border-radius: 25px;
      color: white;
      text-decoration: none;
      cursor: pointer;
      transition: all 0.3s;
      font-weight: 500;
    }
    nav a:hover { background: rgba(255,255,255,0.3); transform: translateY(-2px); }
    
    .search-container {
      max-width: 600px;
      margin: 0 auto 1.5rem;
      display: flex;
      gap: 0.5rem;
    }
    #search-input {
      flex: 1;
      padding: 0.8rem 1.2rem;
      border: none;
      border-radius: 25px;
      font-size: 1rem;
      outline: none;
    }
    #search-btn, #upload-btn {
      padding: 0.8rem 1.5rem;
      border: none;
      border-radius: 25px;
      background: white;
      color: #667eea;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s;
    }
    #upload-btn { background: #4CAF50; color: white; }
    #search-btn:hover, #upload-btn:hover { transform: scale(1.05); }
    
    #upload-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.7);
      z-index: 1000;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }
    #upload-modal.active { display: flex; }
    .modal-content {
      background: white;
      padding: 2rem;
      border-radius: 15px;
      max-width: 600px;
      width: 100%;
      max-height: 90vh;
      overflow-y: auto;
    }
    .modal-content h2 { margin-bottom: 1.5rem; color: #333; }
    .form-group { margin-bottom: 1.5rem; }
    .form-group label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 600;
      color: #555;
    }
    .form-group input[type="text"],
    .form-group input[type="number"],
    .form-group textarea,
    .form-group select {
      width: 100%;
      padding: 0.8rem;
      border: 1px solid #ddd;
      border-radius: 8px;
      font-size: 1rem;
      font-family: inherit;
    }
    .form-group textarea { min-height: 100px; resize: vertical; }
    .form-group input[type="file"] { padding: 0.5rem; }
    .btn-group {
      display: flex;
      gap: 1rem;
      margin-top: 2rem;
    }
    .btn {
      flex: 1;
      padding: 1rem;
      border: none;
      border-radius: 8px;
      font-size: 1rem;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s;
    }
    .btn-primary { background: #667eea; color: white; }
    .btn-secondary { background: #ccc; color: #333; }
    .btn:hover { opacity: 0.9; transform: translateY(-2px); }
    .btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }
    
    main { flex: 1; padding: 2rem 0; }
    .section-header {
      text-align: center;
      margin-bottom: 2rem;
      color: #333;
    }
    
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 1.5rem;
      margin-bottom: 2rem;
    }
    
    .card {
      background: white;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      transition: all 0.3s;
      cursor: pointer;
      display: flex;
      flex-direction: column;
    }
    .card:hover { transform: translateY(-5px); box-shadow: 0 4px 15px rgba(0,0,0,0.2); }
    .card-media {
      width: 100%;
      height: 200px;
      object-fit: cover;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 3rem;
    }
    .card-media img,
    .card-media video { width: 100%; height: 100%; object-fit: cover; }
    .card-body { padding: 1.5rem; flex: 1; }
    .card-title {
      font-size: 1.3rem;
      font-weight: bold;
      margin-bottom: 0.5rem;
      color: #333;
    }
    .card-author {
      font-size: 0.9rem;
      color: #666;
      margin-bottom: 0.5rem;
    }
    .card-description {
      font-size: 0.9rem;
      color: #777;
      margin-bottom: 1rem;
      line-height: 1.5;
      display: -webkit-box;
      -webkit-line-clamp: 3;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }
    .card-footer {
      padding: 1rem 1.5rem;
      background: #f9f9f9;
      border-top: 1px solid #eee;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 0.85rem;
      color: #888;
      flex-wrap: wrap;
      gap: 0.5rem;
    }
    .card-tag {
      background: #667eea;
      color: white;
      padding: 0.3rem 0.8rem;
      border-radius: 15px;
      font-size: 0.8rem;
    }
    .flag-btn {
      background: none;
      border: none;
      color: #dc3545;
      cursor: pointer;
      font-size: 1rem;
      padding: 0.3rem 0.6rem;
      border-radius: 5px;
      transition: all 0.3s;
    }
    .flag-btn:hover {
      background: #ffe6e6;
    }
    .flagged {
      background: #fff3cd;
      border-color: #ffc107;
    }
    
    .empty-state {
      text-align: center;
      padding: 4rem 2rem;
      color: #999;
    }
    .empty-state h3 { font-size: 1.5rem; margin-bottom: 1rem; }
    .empty-state button {
      margin-top: 1rem;
      padding: 1rem 2rem;
      background: #667eea;
      color: white;
      border: none;
      border-radius: 25px;
      font-size: 1rem;
      cursor: pointer;
      transition: all 0.3s;
    }
    .empty-state button:hover { transform: scale(1.05); }
    
    .loading {
      text-align: center;
      padding: 2rem;
      color: #667eea;
      font-size: 1.2rem;
    }
    
    footer {
      background: #333;
      color: white;
      text-align: center;
      padding: 2rem 0;
      margin-top: 3rem;
    }
    footer a { color: #667eea; text-decoration: none; }
    footer a:hover { text-decoration: underline; }
    
    .progress-container {
      width: 100%;
      background: #f0f0f0;
      border-radius: 10px;
      margin-top: 1rem;
      display: none;
    }
    .progress-bar {
      height: 30px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border-radius: 10px;
      text-align: center;
      line-height: 30px;
      color: white;
      font-weight: bold;
      width: 0%;
      transition: width 0.3s;
    }
    
    @media (max-width: 768px) {
      h1 { font-size: 1.5rem; }
      nav { gap: 0.5rem; }
      nav a { padding: 0.5rem 1rem; font-size: 0.9rem; }
      .grid { grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 1rem; }
      .modal-content { padding: 1.5rem; }
    }
  </style>
</head>
<body>
  <header>
    <div class="container">
      <h1>NiBdy: Archiving our way</h1>
      <nav>
        <a onclick="showHome()">Home</a>
        <a onclick="filterSection('literature')">Literature</a>
        <a onclick="filterSection('audio')">Audio</a>
        <a onclick="filterSection('visual art')">Visual Art</a>
        <a onclick="filterSection('performance art')">Performance Art</a>
        <a onclick="filterSection('articles')">Articles</a>
      </nav>
      <div class="search-container">
        <input type="text" id="search-input" placeholder="Search by title, author, or subsection...">
        <button id="search-btn" onclick="performSearch()">üîç</button>
        <button id="upload-btn" onclick="toggleUpload()">Upload</button>
      </div>
    </div>
  </header>

  <main>
    <div class="container">
      <div id="section-header" class="section-header"></div>
      <div id="content" class="grid"></div>
      <div id="loading" class="loading" style="display: none;">Loading materials...</div>
    </div>
  </main>

  <footer>
    <div class="container">
      <p style="margin-top: 0.5rem;">
        <a href="#" onclick="showAbout(event)" style="margin-right: 1rem;">About</a>
        <a href="#" onclick="showCodeOfConduct(event)" style="margin-right: 1rem;">Code of Conduct</a>
        This site is powered by <a href="https://www.netlify.com" target="_blank" rel="noopener">Netlify</a>
      </p>
    </div>
  </footer>

  <div id="upload-modal">
    <div class="modal-content">
      <h2>Archive New Material</h2>
      <form id="upload-form" onsubmit="handleUpload(event)">
        <div class="form-group">
          <label for="file">File *</label>
          <input type="file" id="file" name="file" required>
          <small style="color: #888;">Max size: 15MB. Formats: images, videos, audio, PDFs, text files</small>
        </div>
        
        <div class="form-group">
          <label for="title">Title *</label>
          <input type="text" id="title" name="title" required placeholder="What is this work called?">
        </div>
        
        <div class="form-group">
          <label for="author">Author *</label>
          <textarea id="author" name="author" required placeholder="Who owns this work?"></textarea>
        </div>
        
        <div class="form-group">
          <label for="description">Description *</label>
          <textarea id="description" name="description" required placeholder="Helps for accessibility purposes too."></textarea>
        </div>
        
        <div class="form-group">
          <label for="section">Section *</label>
          <select id="section" name="section" required onchange="updateSubsections()">
            <option value="">Select Section</option>
            <option value="literature">Literature</option>
            <option value="audio">Audio</option>
            <option value="visual art">Visual Art</option>
            <option value="performance art">Performance Art</option>
            <option value="articles">Articles</option>
          </select>
        </div>
        
        <div class="form-group">
          <label for="subsection">Subsection *</label>
          <select id="subsection" name="subsection" required onchange="toggleOtherField()">
            <option value="">Select Subsection</option>
          </select>
        </div>
        
        <div class="form-group" id="other-field" style="display: none;">
          <label for="other-subsection">Please specify *</label>
          <input type="text" id="other-subsection" name="other-subsection" placeholder="What type of work is this?">
        </div>
        
        <div class="form-group" style="background: #f9f9f9; padding: 1.5rem; border-radius: 8px; border: 2px solid #ddd;">
          <label style="margin-bottom: 1rem;">Verify you're human *</label>
          <div id="captcha-question" style="font-size: 1.1rem; font-weight: bold; margin-bottom: 1rem; color: #333;"></div>
          <input type="number" id="captcha-answer" required placeholder="Your answer" style="width: 150px;">
        </div>
        
        <div class="progress-container" id="progress-container">
          <div class="progress-bar" id="progress-bar">0%</div>
        </div>
        
        <div class="btn-group">
          <button type="button" class="btn btn-secondary" onclick="toggleUpload()">Cancel</button>
          <button type="submit" class="btn btn-primary" id="submit-btn">Submit</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Firebase SDKs -->
  <script type="module">
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
    import { getStorage, ref, uploadBytesResumable, getDownloadURL } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-storage.js';
    import { getFirestore, collection, addDoc, getDocs, doc, updateDoc, query, orderBy } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

    const firebaseConfig = {
      apiKey: "AIzaSyC-Iy_9-hkNXDRu_AHFLeHVxhZOy-d0SD0",
      authDomain: "nibdy-archive.firebaseapp.com",
      projectId: "nibdy-archive",
      storageBucket: "nibdy-archive.firebasestorage.app",
      messagingSenderId: "630010581858",
      appId: "1:630010581858:web:d8cd623009d3d35a89d23b"
    };

    const app = initializeApp(firebaseConfig);
    const storage = getStorage(app);
    const db = getFirestore(app);

    window.firebaseStorage = storage;
    window.firebaseDb = db;
    window.firebaseRefs = { ref, uploadBytesResumable, getDownloadURL, collection, addDoc, getDocs, doc, updateDoc, query, orderBy };
  </script>

  <script src="script.js"></script>
  <!-- Code of Conduct Modal -->
<div id="conduct-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 3000; align-items: center; justify-content: center; padding: 20px; overflow-y: auto;">
  <div style="background: white; padding: 2rem; border-radius: 15px; max-width: 800px; width: 100%; max-height: 90vh; overflow-y: auto; margin: auto;">
    <h2 style="margin-bottom: 1rem;">Code of Conduct</h2>
    <h3>Our Pledge</h3>
    <p style="margin-bottom: 1rem;">As team members, leaders, and contributors, we pledge to make participation in our community archive a harassment-free experience for everyone, regardless of age, body size, visible or invisible disability, ethnicity, sex characteristics, gender identity and expression, level of experience, education, socio-economic status, nationality, personal appearance, race, religion, or sexual identity and orientation.</p>
    
    <h3>Our Standards</h3>
    <p style="margin-bottom: 0.5rem;"><strong>Examples of behavior that contributes to a positive environment include:</strong></p>
    <ul style="margin-bottom: 1rem; margin-left: 1.5rem;">
      <li>Using welcoming and inclusive language</li>
      <li>Being respectful of differing viewpoints and experiences</li>
      <li>Gracefully accepting constructive criticism</li>
      <li>Focusing on what is best not just for us as individuals, but for the overall community</li>
    </ul>
    
    <p style="margin-bottom: 0.5rem;"><strong>Examples of unacceptable behavior include:</strong></p>
    <ul style="margin-bottom: 1rem; margin-left: 1.5rem;">
      <li>The use of sexualised language or imagery</li>
      <li>Trolling, insulting or derogatory comments in preserved materials, and personal or political attacks</li>
      <li>Public or private harassment</li>
      <li>Publishing others' private information without explicit permission</li>
    </ul>
    
    <h3>Enforcement</h3>
    <p style="margin-bottom: 1.5rem;">Team leaders are responsible for clarifying and enforcing our standards of acceptable behavior and will take appropriate and fair corrective action in response to any behavior that they deem inappropriate, threatening, offensive, or harmful.

Team leaders have the right and responsibility to remove, edit, or reject uploads, comments, commits, code, issues, and other contributions that are not aligned to this Code of Conduct, and will communicate reasons for moderation decisions when appropriate.</p>

    <h3>Scope</h3>
    <p style="margin-bottom: 1.5rem;">This Code of Conduct applies within all community spaces, and also applies when an individual is officially representing the community in public spaces. Examples of representing our community include using an official e-mail address, posting via an official social media account, or acting as an appointed representative at an online or offline event.</p>
    
    <button onclick="closeCodeOfConduct()" style="width: 100%; padding: 1rem; background: #667eea; color: white; border: none; border-radius: 8px; font-size: 1rem; font-weight: bold; cursor: pointer;">Close</button>
  </div>
  <!-- About Modal -->
  <div id="about-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 3000; padding: 20px; overflow-y: auto;">
    <div style="background: white; padding: 2.5rem; border-radius: 15px; max-width: 900px; width: 100%; max-height: 90vh; overflow-y: auto; margin: 2rem auto;">
      <div style="text-align: center; margin-bottom: 2rem;">
        <h2 style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; font-size: 2.5rem; margin-bottom: 0.5rem;">About NiBdy</h2>
        <p style="font-size: 1.1rem; color: #667eea; font-style: italic;">Archiving our way</p>
      </div>
      
      <div style="line-height: 1.8; color: #333; font-size: 1.05rem;">
        <p style="margin-bottom: 1.5rem;">Across traditional archives, marginalized communities face erasure and are often excluded. This leads to a loss of stories and contributes to the active underrepresentation of these communities across society.</p>
        
        <p style="margin-bottom: 1.5rem;"><strong>NiBdy</strong>‚Äîa play on "anybody" and "everybody"‚Äîseeks to address this through our community archive by creating a home for every marginalized history, where every story deserves to be documented and preserved for future generations.</p>
        
        <p style="margin-bottom: 1.5rem;">Here, <em>you</em> become an archivist and protect your communities from institutionalized gatekeeping and erasure. From research to visual and performance art, literature, and audio, we invite you to add and preserve materials dear to you.</p>
        
        <div style="background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%); padding: 1.5rem; border-radius: 10px; border-left: 4px solid #667eea; margin: 2rem 0;">
          <p style="margin: 0; font-weight: 500;">At the moment, we're testing and listening to every piece of feedback you have about NiBdy. We hope to fully launch additional features in the coming months‚Äîincluding our research hub and multidisciplinary exchange serving as home to important work across the art and cultural ecosystem in Nigeria and beyond.</p>
        </div>
        
        <p style="text-align: center; margin-top: 2rem; font-size: 1.1rem;">Thank you, and welcome to NiBdy.</p>
        
        <p style="text-align: center; margin-top: 1rem; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; font-weight: bold; font-size: 1.1rem;">With love,<br>The NiBdy Team üíú</p>
      </div>
      
      <button onclick="closeAbout()" style="width: 100%; margin-top: 2rem; padding: 1rem; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 8px; font-size: 1rem; font-weight: bold; cursor: pointer; transition: all 0.3s;">Close</button>
    </div>
  </div>

</body>
</html>
